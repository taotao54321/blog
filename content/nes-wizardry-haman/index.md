+++
title = "Wizardry 3 部作 (FC/NES) の HAMAN の恩恵は 6 種類"
date = 2023-10-16

[taxonomies]
tags = ["NES", "Wizardry"]
+++

一般に Wizardry #1, #2, #3 の HAMAN で出現するのは以下の 5 種類の恩恵とされている:

* 0: パーティを治療する
* 1: 魔物を黙らせる
* 2: 魔力を増大する
* 3: 魔物をテレポートする
* 4: パーティを回復させる

しかし、少なくとも FC/NES 版では低確率で "5: パーティを守る" も出現する。つまり 6 種類の恩恵が出現しうる(確率は一様ではない)。

これは、FC/NES 版の恩恵生成処理が以下のようになっているため:

* `恩恵[0]` を `0..=3` からランダムに選ぶ。
* `恩恵[1]` を `0..=3` からランダムに選び、これが既存の恩恵と等しいなら 1 を加える。
* `恩恵[2]` を `0..=3` からランダムに選び、これが既存の恩恵と等しい限り 1 を加えることを繰り返す。

つまり、3 回の乱数生成で全て恩恵 3 が選ばれた場合 `恩恵[2]` は 5 となる。

なお、MAHAMAN の場合は各恩恵を `0..=6` からランダムに選び、重複しなくなるまで 1 を mod 7 で加算するという処理になっている。よって、「魔物をテレポートする」を狙う場合は HAMAN の方が有利(直観に合致する)。

Wizardry 五つの試練では HAMAN が「シックスブーンズ」と改名されているが、この名称はこれに由来するのかも?(五つの試練の方で 6 種類の恩恵が出るかどうかは調べていないが)
